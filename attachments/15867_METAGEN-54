From dc32e182f350ab4ae67deee0ff8eda4076c0c5e6 Mon Sep 17 00:00:00 2001
From: Martijn Blankestijn <martijnblankestijn@gmail.com>
Date: Sun, 13 Feb 2011 14:03:04 +0100
Subject: [PATCH 2/2] Extra check on return type from a method

---
 .../hibernate/jpamodelgen/xml/XmlMetaEntity.java   |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/src/main/java/org/hibernate/jpamodelgen/xml/XmlMetaEntity.java b/src/main/java/org/hibernate/jpamodelgen/xml/XmlMetaEntity.java
index ee389e1..c1534ed 100644
--- a/src/main/java/org/hibernate/jpamodelgen/xml/XmlMetaEntity.java
+++ b/src/main/java/org/hibernate/jpamodelgen/xml/XmlMetaEntity.java
@@ -221,7 +221,10 @@ public class XmlMetaEntity implements MetaEntity {
         }
         else if (elem.asType() instanceof ExecutableType) {
             ExecutableType executableType = (ExecutableType) elem.asType();
-            type = (DeclaredType) executableType.getReturnType();
+            if (executableType.getReturnType() instanceof DeclaredType) {
+                DeclaredType declaredType = (DeclaredType) executableType.getReturnType();
+                type = declaredType;
+            }
         }
         return type;
     }
-- 
1.7.0.4

